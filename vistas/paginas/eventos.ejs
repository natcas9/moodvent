<!-- visualizarEventos -->
<!DOCTYPE html>
<!--
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <%- include('../partials/head.ejs') %>
    <link rel="stylesheet" href="/static/css/visualizarEventos.css" />
    <title>Eventos</title>
  </head>

  <body>
    <h1>Lista de Eventos</h1>
    <ul>
      <% eventos.forEach(evento => { %>
      <li>
        <strong><%= evento.nombre %></strong> - <%= evento.fecha %> - <%=
        evento.estadoAnimo %> -
        <a href="/eventos/detalles/<%= evento.id %>">Ver más</a>
      </li>
      <div>
        <a href="/eventos/editar/<%= evento.id %>"> Editar</a>
      </div>
      <form
        action="/eventos/eliminar/<%= evento.id %>"
        method="POST"
        style="display: inline"
      >
        <button
          type="submit"
          onclick="return confirm('¿Estás seguro de eliminar este evento?');"
        >
          Eliminar
        </button>
      </form>
      <% }) %>
    </ul>
    <p><a href="/">Volver</a></p>
    <!--SE SIGUE DESAROLLANDO-->
    <!--esta página será para poder ver los eventos que crea cada usuario -->

    <!DOCTYPE html>
    <html lang="es">
      <head>
        <meta charset="UTF-8" />
        <title>EVENTOS</title>
        <link rel="stylesheet" href="/static/css/visualizarEventos.css" />
      </head>

      <bodys>
        <div class="container">

      <!-- Filtrar  -->
      <form class="filtros" method="GET" action="/eventos/visualizar">
        <h3>Filtrar Eventos</h3>
        <label>Estado de Animo:
          <select name="estadoAnimo">
            <option value="">Todos</option>
            <option value="feliz">Feliz</option>
            <option value="relajado">Relajado</option>
            <option value="triste">Triste</option>
            <option value="ansioso">Ansioso</option>
            <option value="enojado">Enojado</option>
          </select>
        </label>

        <label>Ubicación:
          <input type="text" name="ubicacion" placeholder="Ciudad o dirección" />
        </label>

        <label>Fecha:
          <input type="date" name="fecha" />
        </label>

        <label>Precio máximo:
          <input type="number" name="precio" placeholder="Máximo" />
        </label>

        <button type="submit">Aplicar filtros</button>
        <button type="button" onclick="window.location.href='/eventos/visualizar'"> Eliminar filtros</button>
      </form>

      <!-- displaying the events thingys-->
      <div class="eventos">
        <% eventos.forEach(evento => { %>
          <div class="evento" id="evento-<%= evento.id %>">
            <img
              src="<%= evento.imagen %>"
              alt="Imagen del evento"
              class="evento-img"
            />
            <div class="evento-info">
              <h2><%= evento.nombre %></h2>
              <p>Estado de ánimo: <%= evento.estadoAnimo %></p>

              <div class="evento-details" id="details-<%= evento.id %>" style="display: none;">
                <p>Fecha: <%= evento.fecha %></p>
                <p>Precio: <%= evento.precio %></p>
                <p>Lugar: <%= evento.lugar %></p>
                <p> Descripción: <%= evento.descripcion %> </p>
              </div>
              
              <a href="/eventos/editar/<%= evento.id %>" class="Editar">Editar</a>

              
              <form
                action="/eventos/eliminar/<%= evento.id %>"
                method="POST"
                style="display: inline"
              >
                <button
                  type="submit"
                  onclick="return confirm('¿Estás seguro de eliminar este evento?');"
                >
                  Eliminar
                </button>
              </form>

         
              <button
                class="mas-info"
                onclick="toggleDescripcion('<%= evento.id %>')"
              >
                Más info
              </button>
            </div>
          </div>
        <% }) %>
      </div>

    </div>


    <button onclick="window.location.href='/'" class="back-button">
      BACK
    </button>

    <script>
      function toggleDescripcion(id) {
        const details = document.getElementById("details-" + id);
        if (details) {
          details.style.display = details.style.display === "none" ? "block" : "none";
        }
      
      }
    </script>
  </body>
</html>

