<h1>Lista de Eventos</h1>

<div class="container">
  <div class="eventos">
    <% eventos.forEach(evento => { %>
    <div class="evento">
      <img
        src="<%= evento.imagen || '/img/default-event.jpg' %>"
        alt="Imagen del evento"
        class="evento-img"
      />
      <div class="evento-info">
        <h2><%= evento.nombre %></h2>
        <p><strong>Fecha:</strong> <%= evento.fecha %></p>
        <p><strong>Precio:</strong> $<%= evento.precio %></p>
        <p><strong>Lugar:</strong> <%= evento.lugar %></p>
        <p><strong>Estado de ánimo:</strong> <%= evento.estadoAnimo %></p>

        <div style="margin-top: 10px">
          <a href="/eventos/editar/<%= evento.id %>" class="btn-eventos"
            >Editar</a
          >
          <a href="/eventos/detalles/<%= evento.id %>" class="btn-eventos"
            >Ver más</a
          >
          <form
            action="/eventos/eliminar/<%= evento.id %>"
            method="POST"
            style="display: inline"
          >
            <button
              type="submit"
              onclick="return confirm('¿Estás seguro de eliminar este evento?');"
            >
              Eliminar
            </button>
          </form>
        </div>

        <button
          class="mas-info"
          onclick="toggleDescripcion('<%= evento.id %>')"
        >
          Más info
        </button>
        <div
          class="descripcion"
          id="desc-<%= evento.id %>"
          style="display: none"
        >
          <p><%= evento.descripcion %></p>
        </div>
      </div>
    </div>
    <% }) %>
  </div>

  <div class="filtros">
    <h3>Filtrar Eventos</h3>
    <form method="GET" action="/eventos/visualizar">
      <label>
        Temática:
        <select name="tematica">
          <option value="">Todas</option>
          <option value="musica">Música</option>
          <option value="deporte">Deporte</option>
          <option value="arte">Arte</option>
        </select>
      </label>
      <label>
        Ubicación:
        <input type="text" name="ubicacion" placeholder="Ciudad o dirección" />
      </label>
      <label>
        Fecha:
        <input type="date" name="fecha" />
      </label>
      <label>
        Precio máximo:
        <input type="number" name="precio" placeholder="Máximo" />
      </label>
      <button type="submit">Aplicar filtros</button>
    </form>
  </div>
</div>

<script>
  function toggleDescripcion(id) {
    const desc = document.getElementById("desc-" + id);
    desc.style.display = desc.style.display === "none" ? "block" : "none";
  }
</script>
